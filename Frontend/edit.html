<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Db Entries</title>
</head>

<style>
    .choice{
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 30px;
    }

    .inp{
        display: block;
        width: 300px;
    }

    .showDb{
        border: 2px solid black;
        width: 500px;
        height: max-content;
        /* height: 700px; */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border-radius: 10px;
        gap: 30px;
    }

    .new-entry{
        background-color: aqua;
        width: 200px;
        height: max-content;
        padding: 10px;
        border-radius: 10px;
        display: flex;
        
    }
</style>

<body>
    <div class="choice">

        <label for="">Enter the name of the item you would like to edit</label>
        <!-- <br> -->
        <input class="inp" id="inp1" type="text" name="name" placeholder="Enter the name" required>

        <label for="month"> Choose the month</label>
        <input class="inp" id="inp2" type="month" name="month" required>

        <button class="search" onclick="showDb()"> Search Now</button>

        
        <div class="showDb">
            
        </div>
        
    </div>
    <script>
       async function showDb(){

            const find = document.getElementById("inp1").value;
            const month = document.getElementById("inp2").value;
            
            let result = await fetch("http://localhost:3000/edit", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({find, month})
            })

            let data = await result.json();
            data.forEach(entry => {

                let card = document.createElement("div")
                card.className = "new-entry"
                card.innerHTML = `<p> Name: ${entry.name}</p>
                <p>Month: ${entry.month}</p>
                <p>Price: ${entry.price}</p>
                `
                
                console.log(card);
                document.querySelector(".showDb").appendChild(card)
            })
        }

        // The cards are not being added automatically see why and also see if you should add a for each or any loop for printing all there cars
      // No wgive it a button to select the db and edit that particular db entry and see if PUT method will be used

        //


    </script>


</body>
</html>